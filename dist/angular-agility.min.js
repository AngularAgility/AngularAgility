/*! angular-agility v0.8.0 @ 2014-05-01T00:10:10 */

!function(){"use strict";function a(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"===a?b:3&b|8;return c.toString(16)})}function b(a){return a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})}function c(a){return a.replace(/([a-z](?=[A-Z]))/g,"$1 ")}function d(a){return a.outerHTML||function(a){var b,c=document.createElement("div");return c.appendChild(a.cloneNode(!0)),b=c.innerHTML,c=null,b}(a)}function e(a){var b=Array.prototype.slice.call(arguments,1);return a.replace(/{(\d+)}/g,function(a,c){return"undefined"!=typeof b[c]?b[c]:a})}function f(a,b){a.$aaFormExtensions[b]||(a.$aaFormExtensions[b]={hadFocus:!1,$errorMessages:[],$element:null})}function g(a,b){if(a&&b){var c=a.indexOf(b);-1!==c&&a.splice(c,1)}}function h(a,b){a.$aaFormExtensions.$changeDependencies.push(b),a.$aaFormExtensions.$parentForm&&h(a.$aaFormExtensions.$parentForm,b)}function i(a){j(a),a.$aaFormExtensions.$parentForm&&i(a.$aaFormExtensions.$parentForm)}function j(a){var b=!1;angular.forEach(a.$aaFormExtensions.$changeDependencies,function(a){a.isChanged&&(b=!0)}),a.$aaFormExtensions.$changed=b}function k(a,b,c,d,e,f,k,l){return{restrict:a?"EAC":"E",require:"form",compile:function(){return{pre:function(a,c,m,n){function o(a,b){a.$aaFormExtensions.$invalidAttempt=b,angular.forEach(a.$aaFormExtensions.$childForms,function(a){o(a,b)})}function p(b,c){f(function(){function d(){a.$watch(b,function(a,b){a!==b&&(g.isChanged=!angular.equals(g.initialValue,a),i(n))},c)}if(void 0===c&&(c=!0),!angular.isString(b))throw new Error("$addChangeDependency only supports string watchExprs to allow for form reset support");var e=!1;if(angular.forEach(n.$aaFormExtensions.$changeDependencies,function(a){b===a.expr&&(e=!0)}),!e){var g={expr:b,isChanged:!1,initialValue:angular.copy(a.$eval(b)),$form:n};h(n,g);var j;f(function(){l.aaIsLoading?j=a.$watch(function(){return l.aaIsLoading},function(a){a||(j(),f(d))}):d()})}})}function q(c){function e(){angular.forEach(n.$aaFormExtensions.$changeDependencies,function(b){if(b.field&&b.field.$ngModel.$modelValue!==b.initialValue&&(b.field.$ngModel.$setViewValue(b.initialValue),b.field.$ngModel.$render()),b.expr){for(var c=a,e=null;void 0!==c.$eval(b.expr);)e=c,c=c.$parent;d(b.expr).assign(e,angular.copy(b.initialValue))}}),s(c)}k.when(b.confirmResetStrategy()).then(function(a){a&&e()})}function r(b){f(function(){angular.forEach(n.$aaFormExtensions.$changeDependencies,function(b){b.isChanged=!1,b.field&&(b.initialValue=b.field.$ngModel.$modelValue,j(b.field.$form)),b.expr&&(b.initialValue=angular.copy(a.$eval(b.expr)),j(b.$form))}),j(n),angular.isFunction(b)&&b()})}function s(a){f(function(){o(n,!1),angular.forEach(n.$aaFormExtensions.$allValidationErrors,function(a){a.field.hadFocus=!1,a.field.$element.removeClass("aa-had-focus"),a.field.$ngModel.$setPristine()}),angular.isFunction(a)&&a()})}var t=c.parent().controller("form");if(n.$aaFormExtensions={$onSubmitAttempt:function(){o(n,n.$invalid)},$parentForm:t,$childForms:[],$allValidationErrors:[],$changeDependencies:[],$changed:!1,$invalidAttempt:!1,$addChangeDependency:p,$reset:q,$resetChanged:r,$clearErrors:s},t&&t.$aaFormExtensions.$childForms.push(n),!t&&"false"!==m.aaConfirmationMessage){var u=b.onNavigateAwayStrategies[m.onNavigateAwayStrategy||b.defaultOnNavigateAwayStrategy];angular.isFunction(u)&&u(a,n,e)}a.$watchCollection(function(){return a.$$aaFormExtensionsTodos},function(b){if(b)for(var c=a.$$aaFormExtensionsTodos.length-1;c>=0;c--){var d=a.$$aaFormExtensionsTodos[c];(d.targetFormName===n.$name||!d.targetFormName&&!n.$aaFormExtensions.$parentForm)&&(n.$aaFormExtensions[d.type].apply(this,d.args),a.$$aaFormExtensionsTodos.splice(c,1))}}),a.$on("$destroy",function(){function a(c){c.$aaFormExtensions.$allValidationErrors.length&&(angular.forEach(b,function(a){for(var b,d=c.$aaFormExtensions.$allValidationErrors.length;d--;)b=c.$aaFormExtensions.$allValidationErrors[d],b.field.$ngModel===a&&c.$aaFormExtensions.$allValidationErrors.splice(d,1)}),g(c.$aaFormExtensions.$childForms,n),angular.forEach(n.$aaFormExtensions.$changeDependencies,function(a){g(c.$aaFormExtensions.$changeDependencies,a),j(c)}),c.$aaFormExtensions.$parentForm&&a(c.$aaFormExtensions.$parentForm))}var b=[];n.$aaFormExtensions.$parentForm&&(angular.forEach(n,function(a,c){0!==c.indexOf("$")&&b.push(a)}),a(n.$aaFormExtensions.$parentForm))})},post:function(a,d,e,f){function g(){if(f.$aaFormExtensions.$invalidAttempt)return f.$aaFormExtensions.$allValidationErrors;var a=[];return angular.forEach(f.$aaFormExtensions.$allValidationErrors,function(b){b.field.hadFocus&&a.push(b)}),a}d.on("keyup",function(a){13===a.keyCode&&angular.isFunction(f.$aaFormExtensions.$onEnterKey)&&"TEXTAREA"!==a.target.tagName.toUpperCase()&&f.$aaFormExtensions.$onEnterKey()});var h=null,i=a.$eval(e.notifyTarget),j=i||b.defaultNotifyTarget;!j||f.$aaFormExtensions.$parentForm&&!i||a.$watch(function(){return angular.toJson([f.$aaFormExtensions.$allValidationErrors,f.$aaFormExtensions.$invalidAttempt])},function(){var a=f.$aaFormExtensions.$invalidAttempt&&f.$invalid;a||angular.forEach(f.$aaFormExtensions.$allValidationErrors,function(b){b.field.hadFocus&&(a=!0)}),h&&!a&&(c.remove(h,j),h=null),!h&&a&&(h=c.add({validationErrorsToDisplay:g,onClose:function(){h=null}},j,"aaFormExtensionsValidationErrors"))}),a.$on("$destroy",function(){h&&c.remove(h,j)})}}}}}angular.module("aa.formExtensions",["aa.notify"]).config(["aaNotifyConfigProvider","$httpProvider","$provide",function(a,b,c){a.addOrUpdateNotifyConfig("aaFormExtensionsValidationErrors",{template:'<div class="alert alert-danger aa-form-extensions-validation-errors"><div class="pull-right aa-notify-close" ng-click="close(notification)"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-times fa-stack-1x fa-inverse"></i></span></div><strong>The following fields have validation errors: </strong><ul><li ng-repeat="error in notification.validationErrorsToDisplay()">{{ error.message }}&nbsp;<a href="" title="Focus Field" ng-click="notification.showField(error)"><i class="fa fa-search"></i></a></li></ul></div>',options:{ttl:0,showField:function(a){a.field.$element[0].focus()}}}),c.factory("aaLoadingWatcher",["$rootScope",function(a){function b(){a.aaIsLoading=d.isLoading=c>0,a.$$phase||a.$apply()}var c=0,d={isLoading:!1,increment:function(){c++,b()},decrement:function(){c--,b()}};return d}]),c.factory("aaAjaxInterceptor",["aaLoadingWatcher","$q",function(a,b){return{request:function(b){return a.increment(),b},response:function(b){return a.decrement(),b},responseError:function(c){return a.decrement(),b.reject(c)}}}]),b.interceptors.push("aaAjaxInterceptor"),c.decorator("$controller",["$delegate",function(a){return function(b,c){function d(a){c.$scope.$$aaFormExtensionsTodos||(c.$scope.$$aaFormExtensionsTodos=[]),c.$scope.$$aaFormExtensionsTodos.push(a)}return c.$scope&&(c.$aaFormExtensions={$addChangeDependency:function(a,b,c){d({type:"$addChangeDependency",args:[a,b],targetFormName:c})},$resetChanged:function(a,b){d({type:"$resetChanged",args:[a],targetFormName:b})},$reset:function(a,b){d({type:"$reset",args:[a],targetFormName:b})},$clearErrors:function(a,b){d({type:"$clearErrors",args:[a],targetFormName:b})}}),a(b,c)}}])}]).directive("aaSubmitForm",["aaFormExtensions","$q",function(a,b){return{scope:{aaSubmitForm:"&"},restrict:"A",require:"^form",link:function(c,d,e,f){function g(){if(f.$aaFormExtensions.$onSubmitAttempt(),f.$valid){var g=a.spinnerClickStrategies[e.spinnerClickStrategy||a.defaultSpinnerClickStrategy],h=g(d);h.before(),b.when(c.aaSubmitForm()).finally(function(a){return h.after(),a})}c.$apply()}d.on("click",g),"submit"===e.type&&(f.$aaFormExtensions.$onEnterKey=g)}}}]).directive("ngModel",["aaFormExtensions","$document","aaLoadingWatcher","$timeout",function(a,b,c,d){return{require:["ngModel","?^form"],priority:1,link:function(k,l,m,n){function o(){function a(){w.initialValue!==w.initialValue&&(w.initialValue=r.$modelValue);var a=w.initialValue!==r.$modelValue;w.isChanged!==a&&(w.isChanged=a,i(s))}w.initialValue=r.$modelValue,r.$viewChangeListeners.push(a),r.$formatters.push(function(b){return a(),b})}function p(){var b,c=u.$errorMessages;c.length=0;for(var d in r.$error)r.$error[d]&&(m[d+"Msg"]?(b=e(m[d+"Msg"],t,m[d]),c.push(b)):"minlength"===d?(b=e(m.ngMinlengthMsg||a.validationMessages.minlength,t,m.ngMinlength),c.push(b)):"maxlength"===d?(b=e(m.ngMaxlengthMsg||a.validationMessages.maxlength,t,m.ngMaxlength),c.push(b)):"min"===d?(b=e(m.minMsg||a.validationMessages.min,t,m.min),c.push(b)):"max"===d?(b=e(m.maxMsg||a.validationMessages.max,t,m.max),c.push(b)):"pattern"===d?(b=e(m.ngPatternMsg||a.validationMessages.pattern,t),c.push(b)):"required"===d&&"number"===l[0].type?(b=e(m.numberMsg||a.validationMessages.number,t),c.push(b)):a.validationMessages[d]?(b=e(a.validationMessages[d],t),c.push(b)):(b=e(a.validationMessages.unknown,t),c.push(b)));q(s,c)}function q(a,b){for(var c=a.$aaFormExtensions.$allValidationErrors.length-1;c>=0;c--)a.$aaFormExtensions.$allValidationErrors[c].field===u&&a.$aaFormExtensions.$allValidationErrors.splice(c,1);b&&angular.forEach(b,function(b){a.$aaFormExtensions.$allValidationErrors.push({field:u,message:b})}),a.$aaFormExtensions.$parentForm&&q(a.$aaFormExtensions.$parentForm,b)}var r=n[0],s=n[1],t="This field";if(s&&r.$name){f(s,r.$name);var u=s.$aaFormExtensions[r.$name];if(m.aaLabel||m.aaFieldName?t=m.aaLabel||m.aaFieldName:l[0].id&&angular.forEach(b.find("label"),function(a){a.getAttribute("for")===l[0].id&&(t=(a.innerHTML||"").replace("*","").trim())}),u.$element=l,u.$ngModel=r,u.$form=s,l.on("blur",function(){u.hadFocus=!0,l.addClass("aa-had-focus"),d(function(){},1)}),k.$watch(function(){return s.$aaFormExtensions.$invalidAttempt},function(a){a&&l.addClass("aa-invalid-attempt")}),void 0===m.aaExcludeChanges){var v,w={field:u,isChanged:!1};h(s,w),d(function(){c.isLoading?v=k.$watch(function(){return c.isLoading},function(a){a||(v(),d(o))}):o()}),k.$on("$destroy",function(){function a(b){b.$aaFormExtensions.$parentForm&&a(b.$aaFormExtensions.$parentForm),g(b.$aaFormExtensions.$changeDependencies,w),j(b)}delete s.$aaFormExtensions[r.$name],q(s),a(s)})}k.$watch(function(){return r.$error},function(a){a&&p()},!0)}}}}]).directive("aaValMsg",["$compile","aaFormExtensions",function(a,b){return{require:["ngModel","^form"],link:function(c,d,e,f){var g=f[1];if(!e.name)throw new Error("In order to use aaValMsg a name MUST be specified on the element: "+d[0]);var h=c.$new(),i=b.valMsgPlacementStrategies[e.aaValMsg||b.defaultValMsgPlacementStrategy](d,g.$name,e.name,h);a(i)(h)}}}]).directive("aaValMsgFor",["aaFormExtensions",function(a){return{require:["^form"],priority:1,scope:!0,link:function(a,b,c){var d=c.aaValMsgFor,e=a.$eval(d),g=a.$eval(d.substring(0,d.indexOf(".")));f(g,e.$name);var h=a.$eval(d.replace(".",".$aaFormExtensions."));a.$watchCollection(function(){return h.$errorMessages},function(b){a.errorMessages=b}),a.$watchCollection(function(){return[g.$aaFormExtensions.$invalidAttempt,h.hadFocus]},function(b){var c=b[0],d=b[1];a.showMessages=c||d})},template:a.valMsgForTemplate,replace:!0}}]).directive("aaLabel",["aaFormExtensions",function(b){return{compile:function(c,d){if("SELECT"===c.prop("tagName").toUpperCase()&&void 0!==d.defaultOption){var e=d.defaultOption;(null===e||""===e)&&(e="Select",d.aaLabel&&(e+=" a "+d.aaLabel),e+="..."),c.append(angular.element('<option value=""></option>').html(e))}return function(c,d,e){var f=b.labelStrategies[e.aaLabelStrategy];if(!f){var g=c.$eval(e.aaLabelStrategy);angular.isFunction(g)&&(f=g)}f||(f=b.labelStrategies[b.defaultLabelStrategy]);var h=void 0!==e.required;d[0].id||(d[0].id=a()),f(d,e.aaLabel,h)}}}}]).directive("aaField",["$compile",function(a){return{restrict:"A",scope:!1,replace:!0,priority:1e3,terminal:!0,compile:function(e,f){e.attr("ng-model",f.aaField);var g=f.aaField.substring(f.aaField.lastIndexOf(".")+1);return f.name||e.attr("name",g),f.type||"INPUT"!==e.prop("tagName").toUpperCase()||e.prop("type","text"),f.aaLabel||void 0!==f.noLabel||(g.lastIndexOf("Id")===g.length-2&&(g=g.substring(0,g.length-2)),e.attr("aa-label",b(c(g)))),e.attr("aa-val-msg",""),e.removeAttr("aa-field"),e.replaceWith(d(e[0])),function(b,c){a(c)(b)}}}}]).directive("aaFieldGroup",["$compile","aaFormExtensions",function(a,b){return{restrict:"A",scope:!1,replace:!0,priority:1100,terminal:!0,compile:function(c,d){c.removeAttr("aa-field-group"),c.attr("aa-field",d.aaFieldGroup);var e=b.fieldGroupStrategies[d.aaFieldGroupStrategy||b.defaultFieldGroupStrategy];return e(c),function(b,c){a(c)(b)}}}}]).directive("aaValidIcon",["aaFormExtensions",function(a){return{require:"ngModel",scope:!1,compile:function(b){var c=a.validIconStrategy.getContainer(b),d=angular.element(a.validIconStrategy.validIcon);c.append(d),d[0].style.display="none";var e=angular.element(a.validIconStrategy.invalidIcon);return c.append(e),e[0].style.display="none",function(a,b,c,f){f.$parsers.push(function(a){return f.$valid?(d[0].style.display="",e[0].style.display="none"):(d[0].style.display="none",e[0].style.display=""),a})}}}}]).directive("aaSpinnerClick",["$q","aaFormExtensions",function(a,b){return{link:function(c,d,e){var f=b.spinnerClickStrategies[e.spinnerClickStrategy||b.defaultSpinnerClickStrategy];if(!f)throw new Error("An inline or default spinner click strategy must be specified");d.on("click",function(){c.$apply(function(){var b=f(d);b.before(),a.when(c.$eval(e.aaSpinnerClick)).then(function(a){return b.after(),a})})})}}}]).directive("ngForm",["aaFormExtensions","aaNotify","$parse","$injector","$timeout","$q","aaLoadingWatcher",function(a,b,c,d,e,f,g){return k(!0,a,b,c,d,e,f,g)}]).directive("form",["aaFormExtensions","aaNotify","$parse","$injector","$timeout","$q","aaLoadingWatcher",function(a,b,c,d,e,f,g){return k(!1,a,b,c,d,e,f,g)}]).provider("aaFormExtensions",function(){var a=this;this.defaultLabelStrategy="default",this.labelStrategies={bootstrap3InlineForm:function(a,b,c){var d=angular.element("<label>").attr("for",a[0].id).addClass("col-sm-2 control-label").html(b+(c?" *":"")),e=["button","submit"];if(-1!==e.indexOf(a[0].type))throw new Error("Generating a label for and input type "+a[0].type+" is unsupported.");a.parent().parent().prepend(d)},"default":function(a,b,c){a[0].parentNode.insertBefore(angular.element("<label>").attr("for",a[0].id).html(b+(c?" *":""))[0],a[0])}},this.defaultFieldGroupStrategy="bootstrap3InlineForm",this.fieldGroupStrategies={bootstrap3InlineForm:function(a){a.prop("class")||a.addClass("form-control"),a.wrap('<div class="form-group"><div class="col-sm-3"></div></div>')},bootstrap3BasicFormWithSize:function(a){a.prop("class")||a.addClass("form-control");var b=a.attr("aa-col")||"sm-3";a.wrap('<div class="form-group col-'+b+'"></div>')}},this.defaultValMsgPlacementStrategy="below-field",this.valMsgPlacementStrategies={"below-field":function(a,b,c){var d=angular.element(e('<div aa-val-msg-for="{0}.{1}"></div>',b,c)),f=a[0].type;return f=f?f.toLowerCase():"text","radio"===f?a.parent().parent().append(d):a.after(d),d},hover:function(a,b,c,d){var f=angular.element(e('<div aa-val-msg-for="{0}.{1}" ng-show="showMessages && isHovered && errorMessages.length > 0"></div>',b,c));return a.on("mouseenter",function(){d.isHovered=!0,d.$apply()}),a.on("mouseleave",function(){d.isHovered=!1,d.$apply()}),a.after(f),f}},this.validIconStrategy={validIcon:'<i class="fa fa-check fa-lg"></i>',invalidIcon:'<i class="fa fa-exclamation-circle fa-lg"></i>',getContainer:function(a){var b=angular.element('<div class="col-xs-1 validation-icons"></div>');return a.parent().after(b),b}},this.defaultSpinnerClickStrategy="fontAwesomeInsideButton",this.spinnerClickStrategies={fontAwesomeInsideButton:function(a){var b=angular.element('<i style="margin-left: 5px;" class="fa fa-spinner fa-spin"></i>');return{before:function(){a.prop("disabled",!0),a.append(b)},after:function(){a.prop("disabled",!1),b.remove()}}}},this.defaultNotifyTarget="default",this.defaultOnNavigateAwayStrategy="confirmUiRouterAndDom",this.onNavigateAwayStrategies={confirmUiRouterAndDom:function(a,b,c){function d(){return b.$aaFormExtensions.$changed?"You have unsaved changes are you sure you want to navigate away?":void 0}var e=a.$on("$stateChangeStart",function(a,d,e){b.$aaFormExtensions.$changed&&(d.aaUnsavedPrompted||(a.preventDefault(),window.confirm("You have unsaved changes are you sure you want to navigate away?")&&(d.aaUnsavedPrompted=!0,c.get("$state").go(d.name,e))))});window.addEventListener("beforeunload",d),a.$on("$destroy",function(){e(),window.removeEventListener("beforeunload",d)})},none:angular.noop},this.validationMessages={required:"{0} is required.",email:"The field {0} must be an email.",minlength:"{0} must be at least {1} character(s).",maxlength:"{0} must be less than {1} characters.",min:"{0} must be at least {1}.",max:"{0} must be at most {1}.",pattern:"{0} is invalid.",url:"{0} must be a valid URL.",number:"{0} must be number.",unknown:"{0} is invalid."},this.valMsgForTemplate='<div class="validation-errors"><div class="validation-error" ng-show="showMessages" ng-repeat="msg in errorMessages">{{msg}}</div><div class="notch notch-border"></div><div class="notch"></div></div>',this.confirmResetStrategy=function(){return window.confirm("Are you sure you want to reset any unsaved changes?")},this.globalSettings={messageOnBlur:!0},this.$get=function(){return{defaultLabelStrategy:a.defaultLabelStrategy,labelStrategies:a.labelStrategies,defaultFieldGroupStrategy:a.defaultFieldGroupStrategy,fieldGroupStrategies:a.fieldGroupStrategies,validIconStrategy:a.validIconStrategy,validationMessages:a.validationMessages,valMsgForTemplate:a.valMsgForTemplate,valMsgPlacementStrategies:a.valMsgPlacementStrategies,defaultValMsgPlacementStrategy:a.defaultValMsgPlacementStrategy,defaultSpinnerClickStrategy:a.defaultSpinnerClickStrategy,spinnerClickStrategies:a.spinnerClickStrategies,defaultOnNavigateAwayStrategy:a.defaultOnNavigateAwayStrategy,onNavigateAwayStrategies:a.onNavigateAwayStrategies,defaultNotifyTarget:a.defaultNotifyTarget,confirmResetStrategy:a.confirmResetStrategy,globalSettings:a.globalSettings}}})}(),function(){"use strict";angular.module("aa.formExternalConfiguration",[]).directive("aaConfiguredForm",["$compile","$parse",function(a,b){return{mergedAttrs:[],restrict:"A",scope:!1,replace:!0,priority:500,terminal:!0,compile:function(){var c=this;return function(d,e,f){var g=b(f.validationConfig)(d);e.removeAttr("validation-config"),e.removeAttr("aa-configured-form"),g&&(g.ignore=g.ignore||{},c.findFormElements(e.children(),g),a(e)(d))}},findFormElements:function(a,b){var c=this;angular.forEach(a,function(a){var d=angular.element(a),e=d.attr("ng-model")||d.attr("data-ng-model")||d.attr("ngModel");if(e){if(b.ignore[d[0].name])return;c.processElement(d,e,b)}c.findFormElements(d.children(),b)})},processElement:function(a,b,c){a.attr("name")||a.attr("name",b.split(".").join("-")),this.addValidations(a,b,c)},addValidations:function(a,b,c){var d;if(!(b.indexOf(".")>-1))throw new Error("the name attribute value needs to contain a '.' char");d=b.split(".");var e=d[d.length-2],f=d[d.length-1];e=this.resolveModelName(e,b,c);var g=c.validations[e];g?(this.checkIfAlreadyMerged(e+"."+f)||g[f]["aa-inherit"]&&this.mergeInheritedAttributes(g[f],g[f]["aa-inherit"],g,c.validations),this.addAttributes(a,g[f])):console.log("nopes");var h=c.globals;h&&this.addAttributes(a,h,g,c)},checkIfAlreadyMerged:function(a){return this.mergedAttrs.indexOf(a)<0?(this.mergedAttrs.push(a),!1):!0},addAttributes:function(a,b){for(var c in b)"aa-inherit"!==c&&a.attr(c,b[c])},mergeInheritedAttributes:function(a,b,c,d){var e=this.getInheritedAttributes(b,c,d);e["aa-inherit"]&&!this.checkIfAlreadyMerged(e["aa-inherit"])&&this.mergeInheritedAttributes(e,e["aa-inherit"],c,d);for(var f in e)a.hasOwnProperty(f)||"aa-inherit"!==f&&(a[f]=e[f])},getInheritedAttributes:function(a,b,c){if(a.indexOf(".")<0)return b[a];var d=a.split(".");return c[d[0]][d[1]]},resolveModelName:function(a,b,c){return c.resolveFn?c.resolveFn(b):c.resolve&&c.resolve[a]?c.resolve[a]:a}}}])}(),function(){"use strict";angular.module("aa.notify",[]).factory("aaNotify",["aaNotifyConfig","$rootScope","$sce",function(a,b,c){return{success:function(b,c){return a.notifyConfigs[a.defaultNotifyConfig].namedDefaults.success(b,c,this)},info:function(b,c){return a.notifyConfigs[a.defaultNotifyConfig].namedDefaults.info(b,c,this)},warning:function(b,c){return a.notifyConfigs[a.defaultNotifyConfig].namedDefaults.warning(b,c,this)},danger:function(b,c){return a.notifyConfigs[a.defaultNotifyConfig].namedDefaults.danger(b,c,this)},error:function(b,c){return a.notifyConfigs[a.defaultNotifyConfig].namedDefaults.error(b,c,this)},add:function(d,e,f){return f=f||a.notifyConfigs[a.defaultNotifyConfig],angular.isString(f)&&(f=a.notifyConfigs[f]),e=e||f.defaultTargetContainerName,d=angular.extend(angular.copy(f.options),d),d.messageHandle={},f.optionsTransformer&&f.optionsTransformer(d,c),d.template=f.templateUrl||f.templateName,b.$broadcast("aaNotifyContainer-"+e+"-add",d),d.messageHandle},remove:function(c,d){d=d||a.notifyConfigs[a.defaultNotifyConfig].defaultTargetContainerName,b.$broadcast("aaNotifyContainer-"+d+"-remove",c)},clearAll:function(c){c=c||a.notifyConfigs[a.defaultNotifyConfig].defaultTargetContainerName,b.$broadcast("aaNotifyContainer-"+c+"-clearAll")}}}]).directive("aaNotify",["$timeout",function(a){return{template:'<div><div ng-repeat="notification in notifications" class="aa-notification"><div ng-include="notification.template"></div></div></div>',replace:!0,link:function(b,c,d){b.notifications=[];var e=d.containerName||"default";b.$on("aaNotifyContainer-"+e+"-add",function(c,d){d.replaceExisting&&(b.notifications.length=0),b.notifications.push(d),d.ttl>0&&a(function(){var a=b.notifications.indexOf(d);a>-1&&b.notifications.splice(a,1)},d.ttl)}),b.$on("aaNotifyContainer-"+e+"-remove",function(a,c){for(var d=b.notifications.length-1;d>=0;d--)if(b.notifications[d].messageHandle===c){b.notifications.splice(d,1);break}}),b.$on("aaNotifyContainer-"+e+"-clearAll",function(){b.notifications.length=0}),b.close=function(a){b.notifications.splice(b.notifications.indexOf(a),1),angular.isFunction(a.onClose)&&a.onClose()}}}}]).provider("aaNotifyConfig",function(){var a=this;a.notifyConfigs={},a.addOrUpdateNotifyConfig=function(b,c){var d=a.notifyConfigs[b]=a.notifyConfigs[b]||{};d.name=b,angular.extend(d,c),d.template&&(d.templateName="aaNotifyTemplate-"+d.name)},a.addOrUpdateNotifyConfig("default",{template:'<div class="alert aa-notify-notification" ng-class="notification.cssClasses"><div class="pull-right aa-notify-close" ng-if="notification.showClose" ng-click="close(notification)"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-times fa-stack-1x fa-inverse"></i></span></div><i class="aa-notify-icon" ng-if="notification.iconClass" ng-class="notification.iconClass"></i>&nbsp;<span ng-if="!notification.allowHtml" class="aa-notify-message">{{notification.message}}</span><span ng-if="notification.allowHtml" class="aa-notify-message" ng-bind-html="notification.message"></span></div>',options:{ttl:4e3,replaceExisting:!1},namedDefaults:{success:function(a,b,c){return c.add(angular.extend({message:a,messageType:"success"},b))},info:function(a,b,c){return c.add(angular.extend({message:a,messageType:"info"},b))},warning:function(a,b,c){return c.add(angular.extend({message:a,messageType:"warning"},b))},danger:function(a,b,c){return c.add(angular.extend({message:a,messageType:"danger"},b))},error:function(a,b,c){return c.add(angular.extend({message:a,messageType:"error"},b))}},defaultTargetContainerName:"default",optionsTransformer:function(a,b){a.cssClasses||(a.cssClasses=""),"success"===a.messageType?a.cssClasses+="alert-success":"info"===a.messageType?a.cssClasses+="alert-info":"warning"===a.messageType?a.cssClasses+="alert-warning":("danger"===a.messageType||"error"===a.messageType)&&(a.cssClasses+="alert-danger alert-error"),a.allowHtml&&(a.message=b.trustAsHtml(a.message))}}),a.defaultNotifyConfig="default",this.$get=function(){return{notifyConfigs:a.notifyConfigs,defaultNotifyConfig:a.defaultNotifyConfig}}}).run(["aaNotifyConfig","$templateCache",function(a,b){angular.forEach(a.notifyConfigs,function(a){a.templateName&&b.put(a.templateName,a.template)})}])}(),angular.module("aa.select2",[]).directive("aaSelect2",["$q",function(a){return{require:"ngModel",template:'<input type="text" />',replace:!0,link:function(b,c,d,e){function f(a){return Object.keys?0===Object.keys(a).length:"{}"===JSON.stringify(a)}var g=angular.copy(b.$eval(d.aaSelect2));if(!angular.isObject(g)||f(g))throw'aa-select2 options must be specified. Ex: <div aa-select2="*options here*"...\r\n';var h={},i=g?angular.isFunction(g.options):!1,j=g?angular.isArray(g.options):!1,k=g&&g.mode?-1!==g.mode.indexOf("id"):!1,l=g&&g.mode?-1!==g.mode.indexOf("object"):!1,m=g&&g.mode?-1!==g.mode.indexOf("tags"):!1,n=g&&"@this"===g.id&&"@this"===g.text;if(g.select2&&g.select2.allowClear&&(h.placeholder="Select..."),d.placeholder&&(h.placeholder=d.placeholder),g){if(n?(g.id="id",g.text="text"):(g.id=g.id||"id",g.text=g.text||"text"),j)if(h.data=h.data||{},h.data.text=g.text,n){var o=[];angular.forEach(g.options,function(a){o.push({id:a,text:a})}),h.data.results=o}else h.data.results=g.options;i&&(h.query=function(a){g.options(a.term).success(function(b){if(n){var c=[];angular.forEach(b,function(a){c.push({id:a,text:a})}),b=c}a.callback({results:b,text:g.text})})},k&&(h.initSelection=function(b,c){if(e.$modelValue){if(n&&m){var d=[];return angular.forEach(e.$modelValue,function(a){d.push({id:a,text:a})}),void c(d)}if(n)return void c({id:e.$modelValue,text:e.$modelValue});var f=angular.isArray(e.$modelValue),h=[];f?angular.forEach(e.$modelValue,function(a){h.push(g.textLookup(a))}):h.push(g.textLookup(e.$modelValue)),a.all(h).then(function(a){function b(a){var b;if(b=angular.isUndefined(a.data)?a:a.data,!angular.isObject(b)){var c={};c[g.id]=e.$modelValue,c[g.text]=b,b=c}return b}if(f){var d=[];angular.forEach(a,function(a){d.push(b(a))}),c(d)}else c(b(a[0]))})}})),h.id=g.id,h.formatSelection=function(a){return a[g.text]},h.formatResult=function(a){return a[g.text]},m&&(h.tags=e.$modelValue||[])}var p={width:"resolve"},q=angular.extend(p,h,g.select2);c.select2(q),e.$render=function(){return e.$modelValue?void(k?c.select2("val",e.$modelValue):l&&c.select2("data",e.$modelValue)):void c.select2("val","")},c.bind("change",function(){b.$apply(function(){var a=c.select2("data"),b=null;a?l?b=a:k&&(angular.isArray(a)?(b=[],angular.forEach(a,function(a){b.push(a[g.id])})):b=a[g.id]):b=null,e.$setViewValue(b)})}),c.bind("$destroy",function(){c.select2("destroy")})}}}]);